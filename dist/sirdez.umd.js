(function(s,u){typeof exports=="object"&&typeof module!="undefined"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(s=typeof globalThis!="undefined"?globalThis:s||self,u(s.sirdez={}))})(this,function(s){"use strict";function u(e=1024){const n=new ArrayBuffer(e);return{i:0,view:new DataView(n),bytes:new Uint8Array(n)}}function w(e){e.bytes=new Uint8Array(e.bytes.length*2),e.view=new DataView(e.bytes.buffer)}function l(e){return{i:0,bytes:e,view:new DataView(e.buffer,e.byteOffset,e.byteLength)}}const B={encode(e,n){const{length:t}=n;for(let i=0;i<t;i++)e.view.setUint8(e.i++,n.charCodeAt(i))},decode(e,n){return String.fromCharCode.apply(null,e.bytes.subarray(e.i,e.i=n))}},k={encode(e,n){const{length:t}=n;for(let i=0;i<t;i++)e.view.setUint16(e.i,n.charCodeAt(i)),e.i+=2},decode(e,n){const t=[];for(;e.i<n;)t.push(e.view.getUint16(e.i)),e.i+=2;return String.fromCharCode.apply(null,t)}},E=new TextEncoder,N=new TextDecoder,D={encode(e,n){e.i+=E.encodeInto(n,e.bytes.subarray(e.i)).written},decode(e,n){return N.decode(e.bytes.subarray(e.i,e.i=n))}},L={encode(e,n){const{length:t}=n;for(let i=0;i<t;i++){const o=n.charCodeAt(i);if(o<128)e.view.setUint8(e.i,o),e.i++;else if(o<2048){const c=(o&1984)<<2,d=o&63;e.view.setUint16(e.i,c|d|49280),e.i+=2}else if(o<55296||o>=57344){const c=(o&61440)<<12,d=(o&4032)<<10,a=(o&63)<<8;e.view.setUint32(e.i,c|d|a|3766517760),e.i+=3}else{const c=n.codePointAt(i++),d=(c&1835008)<<6,a=(c&258048)<<4,v=(c&4032)<<2,re=c&63;e.view.setUint32(e.i,d|a|v|re|4034953344),e.i+=4}}},decode(e,n){const t=[];for(;e.i<n;){const i=e.view.getUint8(e.i);if(i<192)t.push(i),e.i++;else if(i<224){const o=e.view.getUint8(e.i+1);e.i+=2,t.push((i&31)<<6|o&63)}else if(i<240){const o=e.view.getUint8(e.i+1),c=e.view.getUint8(e.i+2);e.i+=3,t.push((i&15)<<12|(o&63)<<6|c&63)}else{const o=e.view.getUint32(e.i),c=(i&7)<<18,d=(o&4128768)>>4,a=(o&16128)>>2,v=o&63;t.push(c|d|a|v),e.i+=4}}return String.fromCodePoint.apply(null,t)}},P=(e,n)=>({encode(t,i){const{length:o}=i;n.encode(t,o);for(let c=0;c<o;c++)e.encode(t,i[c])},decode(t){const i=n.decode(t),o=[];for(let c=0;c<i;c++)o.push(e.decode(t));return o}}),f={encode(e,n){e.view.setUint8(e.i++,n)},decode(e){return e.view.getUint8(e.i++)}},y={encode(e,n){e.view.setUint16(e.i,n),e.i+=2},decode(e){const n=e.view.getUint16(e.i);return e.i+=2,n}},g={encode(e,n){e.view.setUint32(e.i,n),e.i+=4},decode(e){const n=e.view.getUint32(e.i);return e.i+=4,n}},b={encode(e,n){e.view.setBigUint64(e.i,n),e.i+=8},decode(e){const n=e.view.getBigUint64(e.i);return e.i+=8,n}},U={encode(e,n){e.view.setInt8(e.i++,n)},decode(e){return e.view.getInt8(e.i++)}},h={encode(e,n){e.view.setInt16(e.i,n),e.i+=2},decode(e){const n=e.view.getInt16(e.i);return e.i+=2,n}},m={encode(e,n){e.view.setInt32(e.i,n),e.i+=4},decode(e){const n=e.view.getInt32(e.i);return e.i+=4,n}},I={encode(e,n){e.view.setBigInt64(e.i,n),e.i+=8},decode(e){const n=e.view.getBigInt64(e.i);return e.i+=8,n}},$={encode(e,n){e.view.setFloat32(e.i,n),e.i+=4},decode(e){const n=e.view.getFloat32(e.i);return e.i+=4,n}},j={encode(e,n){e.view.setFloat64(e.i,n),e.i+=8},decode(e){const n=e.view.getFloat64(e.i);return e.i+=8,n}},V={uint8:f,uint16:y,uint32:g,int8:U,int16:h,int32:m,float32:$,float64:j,bigUint64:b,bigInt64:I},z=(e,n)=>V[`${e}${n}`],M=e=>({encode(n,t){t==null?n.view.setUint8(n.i++,0):(n.view.setUint8(n.i++,1),e.encode(n,t))},decode(n){if(n.view.getUint8(n.i++))return e.decode(n)}}),R=(e,n,t)=>({encode(i,o){const{length:c}=Object.keys(o);n.encode(i,c);for(const d in o)t.encode(i,d),e.encode(i,o[d])},decode(i){const o=n.decode(i),c={};for(let d=0;d<o;d++)c[t.decode(i)]=e.decode(i);return c}}),_=(e,n)=>({encode(t,i){const o=t.i;n.encode(t,0);const c=t.i;e.encode(t,i);const d=t.i,a=d-c;t.i=o,n.encode(t,a),t.i=d},decode(t){return e.decode(t,n.decode(t)+t.i)}}),A=e=>{const n=e instanceof Array?()=>[]:()=>({});return{encode(t,i){for(const o in e)e[o].encode(t,i[o])},decode(t){const i=n();for(const o in e)i[o]=e[o].decode(t);return i}}},J=(...e)=>A(e),G=e=>({encode(n,t){const{byteLength:i}=t;e.encode(n,i),n.bytes.set(t,n.i),n.i+=i},decode(n){const t=e.decode(n);return n.bytes.subarray(n.i,n.i+=t)}}),H={encode(e,n){e.view.setUint8(e.i++,+n)},decode(e){return Boolean(e.view.getUint8(e.i++))}},C=e=>isNaN(+e)?JSON.stringify(e):e;function S(e,n){const t=n?"async ":"",i=n?"await ":"",o=Object.keys(e),c=Object.keys(o).map(a=>+a),d=Object.values(e);return new Function(`[${c.map(a=>"k"+a).join()}]`,`[${c.map(a=>"e"+a).join()}]`,`[${c.map(a=>"d"+a).join()}]`,`return{${t}encode(c,d){${c.map(a=>`${i}e${a}(c,d[${C(o[a])}])`).join(";")}},${t}decode(c){const d=${e instanceof Array?"[]":"{}"};${c.map(a=>`d[${C(o[a])}]=${i}d${a}(c)`).join(";")};return d}}`)(o,d.map(({encode:a})=>a),d.map(({decode:a})=>a))}const F=e=>S(e,!1),K=(...e)=>F(e),r=(e,n)=>{const t=e[0].toUpperCase()+e.slice(1)+n,i=n/8;return new Function(`return {encode(c,d){c.view.set${t}(c.i,d);c.i+=${i}},decode(c){const d=c.view.get${t}(c.i);c.i+=${i};return d}}`)()},Q=r("uint",8),W=r("uint",16),X=r("uint",32),Y=r("int",8),Z=r("int",16),q=r("int",32),p=r("bigUint",64),x=r("bigInt",64),ee=r("float",32),ne=r("float",64),ie=(e,n)=>({async encode(t,i){const{length:o}=i;n.encode(t,o);for(let c=0;c<o;c++)await e.encode(t,i[c])},async decode(t){const i=n.decode(t),o=[];for(let c=0;c<i;c++)o.push(await e.decode(t));return o}}),T=e=>S(e,!0),te=(...e)=>T(e),oe=e=>({async encode(n,t){t==null?n.view.setUint8(n.i++,0):(n.view.setUint8(n.i++,1),await e.encode(n,t))},async decode(n){if(n.view.getUint8(n.i++))return await e.decode(n)}}),se=(e,n,t)=>({async encode(i,o){const{length:c}=Object.keys(o);n.encode(i,c);for(const d in o)t.encode(i,d),await e.encode(i,o[d])},async decode(i){const o=n.decode(i),c={};for(let d=0;d<o;d++)c[t.decode(i)]=await e.decode(i);return c}}),O=e=>{const n=e instanceof Array?()=>[]:()=>({});return{async encode(t,i){for(const o in e)await e[o].encode(t,i[o])},async decode(t){const i=n();for(const o in e)i[o]=await e[o].decode(t);return i}}},ce=(...e)=>O(e);function de(e){const n=u(1024);return{encode(t){for(;;){const i=n.bytes.length-8;try{if(n.i=0,e.encode(n,t),n.i<i)return n.bytes.subarray(0,n.i)}catch(o){if(n.i<i)throw o}w(n)}},decode(t){return e.decode(l(t))}}}function ae(e){let n=64;return{async encode(t){for(;;){const i=u(n),o=i.bytes.length-8;try{if(i.i=0,await e.encode(i,t),i.i<o)return i.bytes.subarray(0,i.i)}catch(c){if(i.i<o)throw c}n=i.i*2}},decode(t){return e.decode(l(t))}}}s.array=P,s.ascii=B,s.asyncArray=ie,s.asyncEvalStruct=T,s.asyncEvalTuple=te,s.asyncOptional=oe,s.asyncRecord=se,s.asyncStruct=O,s.asyncTuple=ce,s.asyncUse=ae,s.bigInt64=I,s.bigUint64=b,s.boolean=H,s.bytes=G,s.contextFromArray=l,s.createContext=u,s.evalBigInt64=x,s.evalBigUint64=p,s.evalFloat32=ee,s.evalFloat64=ne,s.evalInt16=Z,s.evalInt32=q,s.evalInt8=Y,s.evalNumber=r,s.evalStruct=F,s.evalTuple=K,s.evalUint16=W,s.evalUint32=X,s.evalUint8=Q,s.float32=$,s.float64=j,s.growContext=w,s.int16=h,s.int32=m,s.int8=U,s.number=z,s.optional=M,s.record=R,s.string=_,s.struct=A,s.tuple=J,s.uint16=y,s.uint32=g,s.uint8=f,s.use=de,s.utf16=k,s.utf8=D,s.utf8js=L,Object.defineProperty(s,"__esModule",{value:!0}),s[Symbol.toStringTag]="Module"});
